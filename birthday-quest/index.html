<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Birthday Quest: Pick Your Perfect Day</title>
    <meta name="description" content="A cute game to design the perfect birthday day by making choices across fun stages. Built with â¤ï¸ for you." />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <header id="app-header" class="app-header">
      <div class="app-brand">
        <span class="brand-emoji" aria-hidden="true">ğŸ‰</span>
        <h1>Birthday Quest</h1>
        <span class="brand-sub">Pick Your Perfect Day</span>
      </div>
      <div class="header-actions">
        <button id="btn-stats" class="linkish" aria-label="View your stats">Stats</button>
        <button id="btn-share" class="primary" aria-label="Copy a shareable link">Share</button>
      </div>
    </header>

    <main id="app" class="app">
      <div id="confetti" class="confetti-container" aria-hidden="true"></div>
      <!-- Welcome / ToS overlay -->
      <section id="welcome" class="welcome-overlay" aria-hidden="true">
        <div class="welcome-card" role="dialog" aria-modal="true" aria-labelledby="welcome-title">
          <div class="welcome-emoji" aria-hidden="true">ğŸ‰  ğŸ‚</div>
          <h2 id="welcome-title" class="welcome-title">Welcome to your Pre-Birthday Quest, booba!</h2>
          <p class="welcome-sub">Curate your perfect birthday in four quick stages. Every choice scores points and vibes with earlier picks to boost your mood meter. Finish strong to unlock our plan!</p>
          <ul class="welcome-list">
            <li><strong>Stages</strong>: Dinner, Fit, Drinks, Dessert</li>
            <li><strong>Points</strong>: Base score + synergy with previous choices</li>
            <li><strong>Mood Meter</strong>: Higher points = happier meter</li>
            <li><strong>Heads up</strong>: Keep an eye out for the banner at the bottom after you make your choice ğŸ‘€</li>
            <li><strong>Finale</strong>: Reveal your plan, share the joy and get ready for a bomb day of non-stop fun ğŸ˜˜</li>
          </ul>
          <div class="welcome-tos">
            <p class="tos-title">Terms of Seriousness</p>
            <ol>
              <li>You agree to have an excessively delightful time.</li>
              <li>You acknowledge dessert is a fundamental human right.</li>
              <li>You give your full and irrevocable consent to accept all my love (forever ğŸ‘‰ğŸ¼ ğŸ‘ˆğŸ¼).</li>
              <li>Refusal to celebrate triggers spontaneous shower of kisses and hugs.</li>
            </ol>
          </div>
          <div class="welcome-actions">
            <button id="btn-tos-agree" class="ghost">Agree</button>
            <button id="btn-tos-strongly-agree" class="primary">Strongly Agree</button>
          </div>
        </div>
      </section>
      <section id="hud" class="hud">
        <div class="progress">
          <div class="progress-label">
            <span id="progress-text">Stage 1 / 4</span>
          </div>
          <div class="progress-bar">
            <div id="progress-bar-fill" class="progress-fill" style="width: 0%"></div>
          </div>
        </div>

        <div class="mood">
          <div class="mood-top">
            <span class="mood-title">Mood Meter</span>
            <span id="mood-value" class="mood-value">0%</span>
          </div>
          <div class="mood-bar">
            <div id="mood-bar-fill" class="mood-fill" style="width: 0%"></div>
          </div>
        </div>
      </section>

      <!-- Cheering companion (shows during stages) -->
      <div id="cheer-coach" class="cheer-coach hidden" aria-live="polite" aria-atomic="true">
        <div class="coach-bubble"><span id="coach-text">You got this!</span></div>
        <div class="coach-avatar" role="img" aria-label="Cheering girl">ğŸ™‹ğŸ½â€â™€ï¸</div>
      </div>

      <section id="stage" class="stage">
        <h2 id="stage-title" class="stage-title">Loadingâ€¦</h2>
        <p id="stage-desc" class="stage-desc"></p>
        <div id="options" class="options-grid"></div>

        <div class="stage-actions">
          <button id="btn-back" class="ghost">Back</button>
          <button id="btn-next" class="primary" disabled>Next</button>
        </div>
      </section>

      <section id="final" class="final hidden" aria-live="polite">
        <div class="final-card">
          <div class="final-top">
            <h2>Perfect Day Unlocked âœ¨</h2>
            <p id="final-subtitle" class="final-subtitle">Hereâ€™s your curated birthday plan. Leave the details to your gf and get ready to be pampered ğŸ˜</p>
          </div>
          <div id="final-summary" class="final-summary"></div>
          <div class="final-stats">
            <div class="final-meter">
              <span>Overall Mood</span>
              <div class="mood-bar small">
                <div id="final-mood-fill" class="mood-fill" style="width: 0%"></div>
              </div>
            </div>
            <div class="final-score">
              <span>Total Points</span>
              <strong id="final-score">0</strong>
            </div>
          </div>
          <div class="final-actions">
            <button id="btn-edit" class="ghost">Edit Choices</button>
            <button id="btn-save-pdf" class="ghost">Finalize</button>
            <button id="btn-replay" class="primary">Replay</button>
          </div>
        </div>
      </section>

      <!-- Cake candle overlay (visual only, shown on Cake selection) -->
      <div id="cake-overlay" class="cake-overlay" aria-hidden="true">
        <div class="cake-visual">
          <div class="cake-base"></div>
          <div class="candles">
            <div class="candle"><div class="flame"></div><div class="smoke"></div></div>
            <div class="candle"><div class="flame"></div><div class="smoke"></div></div>
            <div class="candle"><div class="flame"></div><div class="smoke"></div></div>
            <div class="candle"><div class="flame"></div><div class="smoke"></div></div>
            <div class="candle"><div class="flame"></div><div class="smoke"></div></div>
          </div>
        </div>
      </div>

      <!-- Congrats overlay after saving PDF -->
      <div id="congrats-overlay" class="congrats-overlay" aria-hidden="true">
        <div class="congrats-card">
          <div class="congrats-emoji">ğŸ’‹</div>
          <h2 class="congrats-title">Congrats on your front lobe developing, boobalicious</h2>
          <p class="congrats-sub">Wishing you wisdom, wonder, and lots of success.</p>
          <div class="hearts">
            <span class="heart" style="--i:0">â¤ï¸</span>
            <span class="heart" style="--i:1">ğŸ’œ</span>
            <span class="heart" style="--i:2">ğŸ’–</span>
            <span class="heart" style="--i:3">ğŸ’™</span>
            <span class="heart" style="--i:4">ğŸ§¡</span>
            <span class="heart" style="--i:5">ğŸ’—</span>
          </div>
          <button id="btn-congrats-close" class="primary">Continue</button>
        </div>
      </div>

      <div id="toast" class="toast" role="status" aria-live="polite"></div>
    </main>

    <!-- Preload SFX -->
    <audio id="sfx-blow" preload="auto">
      <source src="./blowing-out-candlewav-14441.mp3" type="audio/mpeg" />
    </audio>
    <audio id="sfx-confetti" preload="auto">
      <!-- If you add a confetti mp3 later, update this src; we also have a gentle synth fallback -->
      <source src="" type="audio/mpeg" />
    </audio>
    <audio id="sfx-bummer" preload="auto">
      <!-- Optional: add a bummer/wah-wah mp3 and set as source -->
      <source src="" type="audio/mpeg" />
    </audio>

    <dialog id="stats-dialog" class="stats-dialog">
      <form method="dialog">
        <header class="stats-header">
          <h3>Your Trends</h3>
          <button class="icon" title="Close" aria-label="Close">âœ–</button>
        </header>
        <div id="stats-content" class="stats-content"></div>
      </form>
    </dialog>

    <footer class="app-footer">
      <span>Made with ğŸ’– for a special birthday.</span>
      <span class="dot">Â·</span>
      <a href="https://pages.github.com/" target="_blank" rel="noreferrer">Free hosting via GitHub Pages</a>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
    <script src="./script.js" defer></script>
  </body>
</html>